
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <link rel="shortcut icon" href="../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.10.1">
    
    
      
        <title>Authentication - Daptin</title>
      
    
    
      <script src="../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application-a20f419c8e.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Daptin" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Authentication
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <div class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </div>
    Daptin
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../settingup/" title="Setting up" class="md-nav__link">
      Setting up
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../entities/" title="Entities" class="md-nav__link">
      Entities
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../entity_relations/" title="Entity Relations" class="md-nav__link">
      Entity Relations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../users_and_usergroups/" title="Users and groups" class="md-nav__link">
      Users and groups
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../authorization/" title="Authorization" class="md-nav__link">
      Authorization
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../actions/" title="Actions" class="md-nav__link">
      Actions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../data_storage/" title="Data storage" class="md-nav__link">
      Data storage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../marketplace/" title="Marketplace" class="md-nav__link">
      Marketplace
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../auditing/" title="Data Auditing" class="md-nav__link">
      Data Auditing
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Authentication
      </label>
    
    <a href="./" title="Authentication" class="md-nav__link md-nav__link--active">
      Authentication
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication-token" title="Authentication token" class="md-nav__link">
    Authentication token
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-side" title="Server side" class="md-nav__link">
    Server side
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-side" title="Client side" class="md-nav__link">
    Client side
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-using-other-systems" title="Authentication using other systems" class="md-nav__link">
    Authentication using other systems
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sign-up" title="Sign Up" class="md-nav__link">
    Sign Up
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sign-in" title="Sign In" class="md-nav__link">
    Sign In
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../data_validation/" title="Data validation" class="md-nav__link">
      Data validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../data_conformation/" title="Data conformations" class="md-nav__link">
      Data conformations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../state_tracking/" title="State tracking" class="md-nav__link">
      State tracking
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../streams/" title="Data Streams" class="md-nav__link">
      Data Streams
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../permissions/" title="Permission model" class="md-nav__link">
      Permission model
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../oauth_connection/" title="OAuth Connections" class="md-nav__link">
      OAuth Connections
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authentication-token" title="Authentication token" class="md-nav__link">
    Authentication token
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-side" title="Server side" class="md-nav__link">
    Server side
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-side" title="Client side" class="md-nav__link">
    Client side
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-using-other-systems" title="Authentication using other systems" class="md-nav__link">
    Authentication using other systems
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sign-up" title="Sign Up" class="md-nav__link">
    Sign Up
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sign-in" title="Sign In" class="md-nav__link">
    Sign In
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="authentication">Authentication</h1>
<p>Daptin maintains its own user accounts and usergroups as well. Users are identified by <code>email</code> which is a unique key in the <code>user</code> entity. Passwords are stored using bcrypt with a cost of 11. Password field has a column_type <code>password</code> which makes daptin to bcrypt it before storing, and password fields are never returned in any JSONAPI call.</p>
<h2 id="authentication-token">Authentication token</h2>
<p>The authentication token is a JWT token issued by daptin on sign in action. Users can create new actions to allow other means of generating JWT token. It is as simple as adding another outcome to an action.</p>
<h2 id="server-side">Server side</h2>
<p>Daptin uses oAuth2 based authentication strategy. HTTP calls are checked for <code>Authorization</code> header, and if present, validates the token as a JWT token.</p>
<p>The JWT token contains the issuer info (Daptin in this case) plus basic user profile (email). The JWT token has a one hour expiry from the time of issue.</p>
<p>If the token is absent or invalid, the user is considered as a guest. Guests also have certain permissions. Checkout the <a href="../authorization/">Authorization docs</a> for details. </p>
<h2 id="client-side">Client side</h2>
<p>On the client side, for dashboard, the token is stored in local storage. The local storage is cleared on logout or if the server responds with a 401 Unauthorized status.</p>
<h2 id="authentication-using-other-systems">Authentication using other systems</h2>
<p>There is planned road map to allow user logins via external oauth2 servers as well (login via google/facebook/twitter... and so on). This feature is not complete yet. Documentation will be updated to reflect changes.</p>
<h2 id="sign-up">Sign Up</h2>
<p>Sign up is an action on user entity. Sign up takes four inputs:</p>
<ul>
<li>Name</li>
<li>Email</li>
<li>Password</li>
<li>PasswordConfirm</li>
</ul>
<p>When the user initates a Sign up action, the following things happen</p>
<ul>
<li>Check if guests can initiate sign in action</li>
<li>Check if guests can create a new user (create permission)</li>
<li>Create a new user row</li>
<li>Check if guests can create a new usergroup (create permission)</li>
<li>Create a new usergroup row</li>
<li>Associate the user to the usergroup (refer permission)</li>
</ul>
<p>This means that every user has his own dedicated usergrou by default. </p>
<h2 id="sign-in">Sign In</h2>
<p>Sign In is also an action on user entity. Sign in takes two inputs:</p>
<ul>
<li>Email</li>
<li>Password</li>
</ul>
<p>When the user initiates Sign in action, the following things happen:</p>
<ul>
<li>Check if guests can peek users table (Peek permission)</li>
<li>Check if guests can peek the particular user (Peek Permission)</li>
<li>Match if the provided password bcrypted matches the stored bcrypted password</li>
<li>If true, issue a JWT token, which is used for future calls</li>
</ul>
<p>The main outcome of the Sign In action is the jwt token, which is to be used in the <code>Authorization</code> header of following calls.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../auditing/" title="Data Auditing" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Data Auditing
              </span>
            </div>
          </a>
        
        
          <a href="../data_validation/" title="Data validation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Data validation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application-f3ab9e5ff8.js"></script>
      
      
      <script>app.initialize({url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>